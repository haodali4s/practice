{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nexport default {\n  name: \"Register\",\n  data() {\n    return {\n      //手机号\n      phone: \"\",\n      //存储验证码\n      code: \"\",\n      //登录密码\n      password: \"\",\n      //确认密码\n      password1: \"\",\n      //协议收集\n      agree: true\n    };\n  },\n  methods: {\n    //获取验证码按钮的回调\n    async getCode() {\n      //先不处理表单验证业务\n      if (this.phone) {\n        try {\n          //获取验证码成功\n          console.log(this.phone);\n          await this.$store.dispatch(\"getCode\", this.phone);\n          //修改VC身上的code属性,让验证码自动展示\n          this.code = this.$store.state.user.code;\n        } catch (error) {}\n      }\n    },\n    //注册按钮的回调\n    async register() {\n      const success = await this.$validator.validateAll();\n      if (success) {\n        const {\n          phone,\n          code,\n          password,\n          password1\n        } = this;\n        //目前不做表单验证\n        if (phone && code && password == password1) {\n          //通知vuex发请求，进行用户的注册\n          try {\n            //注册成功\n            await this.$store.dispatch(\"registerUser\", {\n              phone,\n              code,\n              password\n            });\n            alert(\"注册成功\");\n            //让用户跳转到登录页面进行登录\n            this.$router.push(\"/login\");\n          } catch (error) {\n            //注册失败\n            alert(error.message);\n          }\n        } else {\n          alert(\"有未填的信息\");\n        }\n      }\n      //解构出参数\n    }\n  }\n};","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}